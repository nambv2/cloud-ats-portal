define(["keyword/module","jquery"],function(a,b){"use strict";b.event.props.push("dataTransfer"),a.registerFactory("uuid",function(){var a={"new":function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()},empty:function(){return"00000000-0000-0000-0000-000000000000"}};return a}),a.registerDirective("smartDraggable",["$rootScope","uuid",function(a,b){return{restrict:"A",link:function(c,d,e){angular.element(d).attr("draggable","true");var f=angular.element(d).attr("id");f||(f=b["new"](),angular.element(d).attr("id",f)),d.bind("dragstart",function(b){b.dataTransfer.setData("text",f),a.$emit("SMART-DRAG-START")}),d.bind("dragend",function(b){a.$emit("SMART-DRAG-END")})}}}]),a.registerDirective("smartDropTarget",["$rootScope","uuid",function(a,b){return{restrict:"A",scope:{onDrop:"&"},link:function(c,d,e){var f=angular.element(d).attr("id");f||(f=b["new"](),angular.element(d).attr("id",f)),d.bind("dragover",function(a){return a.preventDefault&&a.preventDefault(),a.dataTransfer.dropEffect="move",!1}),d.bind("dragenter",function(a){angular.element(a.target).addClass("smart-over")}),d.bind("dragleave",function(a){angular.element(a.target).removeClass("smart-over")}),d.bind("drop",function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();var b=a.dataTransfer.getData("text");document.getElementById(f),document.getElementById(b);c.onDrop({dragEl:b,dropEl:f})}),a.$on("SMART-DRAG-START",function(){var a=document.getElementById(f);angular.element(a).addClass("smart-target")}),a.$on("SMART-DRAG-END",function(){var a=document.getElementById(f);angular.element(a).removeClass("smart-target"),angular.element(a).removeClass("smart-over")})}}}])});
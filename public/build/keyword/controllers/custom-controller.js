define(["keyword/module"],function(a){"use strict";a.registerController("CustomCtrl",["$scope","$state","$stateParams","$templateRequest","$compile","CustomKeywordService",function(a,b,c,d,e,f){a.projectId=c.id,a.title="CUSTOM KEYWORDS",a.backToCaseList=function(){b.go("app.keyword.cases",{id:a.projectId})},f.list(a.projectId,function(b){a.customs=b});var g=function(){var b=$("#editKeyword");b.html(""),d("app/keyword/views/customkeyword-modal-content.tpl.html").then(function(c){b.html(e(c)(a))}),b.on("hidden.bs.modal",function(){a.currentCustomKeyword.saved||(a.currentCustomKeyword.steps=_.cloneDeep(a.currentCustomKeyword.originSteps),a.currentCustomKeyword.name=a.currentCustomKeyword.originName)})};a.newCustomKeyword=function(){a.currentCustomKeyword={name:"New Custom Keyword",steps:[],temp:!0},g()},a.removeDivAddCustom=function(){$("div.add-keyword").hide()},a.clicktoCustom=function(b){b.originSteps=_.cloneDeep(b.steps),b.originName=b.name,a.currentCustomKeyword=b,g()},a.removeCustom=function(){a.currentCustomKeyword.temp||f["delete"](a.projectId,a.currentCustomKeyword._id,function(b,c){switch(c){case 200:$.smallBox({title:"Notification",content:"Your test case has deleted",color:"#296191",iconSmall:"fa fa-check bounce animated",timeout:3e3}),_.remove(a.customs,function(b){return b._id==a.currentCustomKeyword._id});break;default:$.smallBox({title:"Notification",content:"Can not delete your test case",color:"#c26565",iconSmall:"fa fa-ban bounce animated",timeout:3e3})}})},a.save=function(b,c){if(a.currentCustomKeyword.saved=!0,a.currentCustomKeyword.temp){var d=$('input[name="customKeywordName"]');if(void 0===b||null===b||""===b)d.focus(),d.addClass("state-error");else{d.removeClass("state-error");var c={name:b,steps:_.cloneDeep(c.steps)};f.create(a.projectId,c,function(b,c){switch(c){case 201:$.smallBox({title:"Notification",content:"Your custom keyword has created",color:"#296191",iconSmall:"fa fa-check bounce animated",timeout:3e3}),a.customs.push(b);break;default:$.smallBox({title:"Notification",content:"Can not create your custom keyword",color:"#c26565",iconSmall:"fa fa-ban bounce animated",timeout:3e3})}})}}else f.update(a.projectId,a.currentCustomKeyword,function(a,b){switch(b){case 200:$.smallBox({title:"Notification",content:"Your custom keyword has updated",color:"#296191",iconSmall:"fa fa-check bounce animated",timeout:3e3});break;case 204:$.smallBox({title:"Notification",content:"Your custom keyword has nothing to update",color:"#296191",iconSmall:"fa fa-check bounce animated",timeout:3e3});break;default:$.smallBox({title:"Notification",content:"Can not update your test case",color:"#c26565",iconSmall:"fa fa-ban bounce animated",timeout:3e3})}})}}])});
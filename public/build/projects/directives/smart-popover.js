define(["projects/module","lodash"],function(a,b){"use strict";a.registerDirective("smartPopover",["$compile","$templateRequest",function(a,b){return{restrict:"A",replace:!0,scope:{project:"=",log:"&",open:"&",report:"&"},link:function(c,d,e){b(e.popoverTemplate).then(function(b){$(d).popover({placement:function(a,b){var c=$(b).closest(".project"),d=c.position();return d.left>500?"left":"right"},html:!0,content:b,container:"body",trigger:"click"}).click(function(b){a($(".popover.in").contents())(c)})}),$("body").on("click",function(a){$('[data-toggle="popover"]').each(function(){$(this).is(a.target)||0!==$(this).has(a.target).length||0!==$(".popover").has(a.target).length||$(this).popover("hide")})})}}}])});